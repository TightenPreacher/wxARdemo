{"version":3,"sources":["webpack:///F:/hbtest/demo2/pages/API/get-location/get-location.vue?b508","webpack:///F:/hbtest/demo2/pages/API/get-location/get-location.vue?2690","webpack:///F:/hbtest/demo2/pages/API/get-location/get-location.vue?8fe4","webpack:///F:/hbtest/demo2/pages/API/get-location/get-location.vue?11f7","webpack:///F:/hbtest/demo2/pages/API/get-location/get-location.vue","webpack:///F:/hbtest/demo2/pages/API/get-location/get-location.vue?1391","webpack:///F:/hbtest/demo2/pages/API/get-location/get-location.vue?77d1"],"names":["util","require","formatLocation","components","uniPopup","data","title","hasLocation","location","type","methods","togglePopup","showConfirm","hideConfirm","getLocation","getSetting","status","doGetLocation","uni","success","res","longitude","latitude","fail","err","errMsg","indexOf","showToast","Promise","resolve","reject","authSetting","undefined","openSetting","checkPermission","permision","isIOS","requestIOS","requestAndroid","showModal","content","confirmText","confirm","gotoiOSSetting","gotoAppSetting","clear"],"mappings":"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","file":"pages/API/get-location/get-location.js","sourcesContent":["import { render, staticRenderFns } from \"./get-location.vue?vue&type=template&id=673588ba&\"\nimport script from \"./get-location.vue?vue&type=script&lang=js&\"\nexport * from \"./get-location.vue?vue&type=script&lang=js&\"\nimport style0 from \"./get-location.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('673588ba', component.options)\n    } else {\n      api.reload('673588ba', component.options)\n    }\n    module.hot.accept(\"./get-location.vue?vue&type=template&id=673588ba&\", function () {\n      api.rerender('673588ba', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"hbtest/demo2/pages/API/get-location/get-location.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./get-location.vue?vue&type=template&id=673588ba&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./get-location.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./get-location.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uniPopup from '@/components/uni-popup/uni-popup.vue'\nvar util = require('../../../common/util.js');\nvar formatLocation = util.formatLocation;\n\n\n\n\nexport default {\n    components: {\n        uniPopup\n    },\n    data() {\n        return {\n            title: 'getLocation',\n            hasLocation: false,\n            location: {},\n            type: ''\n        }\n    },\n    methods: {\n        togglePopup(type) {\n            this.type = type;\n        },\n        showConfirm() {\n            this.type = 'showpopup';\n        },\n        hideConfirm() {\n            this.type = '';\n        },\n        async getLocation() {\n\n\n\n\n\n\n\n            let status = await this.getSetting();\n            if (status === 2) {\n                this.showConfirm();\n                return;\n            }\n\n\n            this.doGetLocation();\n        },\n        doGetLocation() {\n            uni.getLocation({\n                success: (res) => {\n                    this.hasLocation = true;\n                    this.location = formatLocation(res.longitude, res.latitude);\n                },\n                fail: (err) => {\n\n\n\n\n\n\n                    if (err.errMsg.indexOf(\"auth deny\") >= 0) {\n                        uni.showToast({\n                            title: \"访问位置被拒绝\"\n                        })\n                    } else {\n                        uni.showToast({\n                            title: err.errMsg\n                        })\n                    }\n\n                }\n            })\n        },\n        getSetting: function() {\n            return new Promise((resolve, reject) => {\n                uni.getSetting({\n                    success: (res) => {\n                        if (res.authSetting['scope.userLocation'] === undefined) {\n                            resolve(0);\n                            return;\n                        }\n                        if (res.authSetting['scope.userLocation']) {\n                            resolve(1);\n                        } else {\n                            resolve(2);\n                        }\n                    }\n                });\n            });\n        },\n        openSetting: function() {\n            this.hideConfirm();\n            uni.openSetting({\n                success: (res) => {\n                    if (res.authSetting && res.authSetting['scope.userLocation']) {\n                        this.doGetLocation();\n                    }\n                },\n                fail: (err) => {}\n            })\n        },\n        async checkPermission() {\n            let status = permision.isIOS ? await permision.requestIOS('location') :\n                await permision.requestAndroid('android.permission.ACCESS_FINE_LOCATION');\n\n            if (status === null || status === 1) {\n                status = 1;\n            } else if (status === 2) {\n                uni.showModal({\n                    content: \"系统定位已关闭\",\n                    confirmText: \"设置\",\n                    success: function(res) {\n                        if (res.confirm) {\n                            permision.gotoiOSSetting();\n                        }\n                    }\n                })\n            } else {\n                uni.showModal({\n                    content: \"需要定位权限\",\n                    confirmText: \"设置\",\n                    success: function(res) {\n                        if (res.confirm) {\n                            permision.gotoAppSetting();\n                        }\n                    }\n                })\n            }\n\n            return status;\n        },\n        clear: function() {\n            this.hasLocation = false\n        }\n    }\n}\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./get-location.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./get-location.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}